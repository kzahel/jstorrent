<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/png" sizes="32x32" href="/js-32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/js-16.png" />
    <title>JSTorrent Launcher</title>
    <style>
      body {
        font-family: sans-serif;
        padding: 2rem;
        text-align: center;
      }

      .status {
        margin-top: 1rem;
        padding: 1rem;
        border-radius: 4px;
      }

      .success {
        background-color: #d4edda;
        color: #155724;
      }

      .error {
        background-color: #f8d7da;
        color: #721c24;
      }
    </style>
  </head>

  <body>
    <h1>Launching JSTorrent...</h1>
    <div id="status" class="status">Connecting to extension...</div>

    <script>
      const EXTENSION_ID = 'dbokmlpefliilbjldladbimlcfgbolhk'
      const statusDiv = document.getElementById('status')

      function updateStatus(message, type) {
        statusDiv.textContent = message
        statusDiv.className = 'status ' + type
      }

      if (window.chrome && window.chrome.runtime) {
        window.chrome.runtime.sendMessage(EXTENSION_ID, { type: 'launch-ping' }, (response) => {
          if (chrome.runtime.lastError) {
            console.error(chrome.runtime.lastError)
            updateStatus('Failed to connect to extension. Is it installed?', 'error')
          } else {
            console.log('Extension response:', response)
            updateStatus('Connected to extension! Launching...', 'success')
          }
        })
      } else {
        updateStatus('Chrome runtime not available.', 'error')
      }
    </script>
  </body>
</html>
